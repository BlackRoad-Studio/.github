# ============================================================
# Zero Cost Dashboard
# Tracks all billable services and confirms $0 target
# ============================================================
name: "ğŸ’° Zero Cost Dashboard"

on:
  schedule:
    - cron: '0 12 * * 1'  # Monday noon UTC
  workflow_dispatch:

jobs:
  cost-audit:
    name: "ğŸ’° Cost Audit"
    runs-on: [self-hosted, blackroad-fleet]
    steps:
      - uses: actions/checkout@v4
      - name: Generate cost report
        run: |
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "  BlackRoad OS Cost Dashboard â€” $(date -u +%Y-%m-%d)"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo ""
          echo "GitHub Actions:"
          echo "  âœ… octavia-pi (self-hosted)  = \$0.00/min"
          echo "  âœ… gematria-codex (self-hosted) = \$0.00/min"
          echo "  âš ï¸  ubuntu-latest jobs        = \$0.008/min (minimize!)"
          echo ""
          echo "Cloudflare:"
          echo "  âœ… Workers (free tier <100k/day) = \$0.00"
          echo "  âœ… Tunnels (free)                = \$0.00"
          echo "  âœ… Pages (free)                  = \$0.00"
          echo ""
          echo "Compute:"
          echo "  âœ… octavia-pi (owned hardware) = \$0.00"
          echo "  âœ… lucidia-pi (owned hardware) = \$0.00"
          echo "  âš¡ gematria DO droplet = ~\$24/mo (review)"
          echo ""
          echo "Railway:"
          echo "  âœ… Free tier usage = \$0.00"
          echo ""
          echo "GitHub Copilot:"
          echo "  â„¹ï¸  Replace with self-hosted Pi AI = \$0.00"
          echo "  Pi model: http://192.168.4.38:11435"
          echo ""
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "  Self-hosted runner savings: ~\$0.008 Ã— (workflow minutes)"
          echo "  Target: Migrate ubuntu-latest â†’ self-hosted"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
      - name: List runners
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh api repos/${{ github.repository }}/actions/runners \
            --jq '.runners[] | "\(.name): \(.status) (\(.labels | map(.name) | join(", ")))"'
